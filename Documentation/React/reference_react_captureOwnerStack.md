---
url: https://react.dev/reference/react/captureOwnerStack
scraped_at: 2025-05-25T08:42:14.389143
title: captureOwnerStack – React
---

Join us for React Conf on Oct 7-8.
[Learn more.](https://conf.react.dev/)
[![logo by @sawaratsuki1004](https://react.dev/_next/image?url=%2Fimages%2Fuwu.png&w=128&q=75)](https://react.dev/)
[React](https://react.dev/)
[v19.1](https://react.dev/versions)
Search`⌘``Ctrl``K`
[Learn](https://react.dev/learn)
[Reference](https://react.dev/reference/react)
[Community](https://react.dev/community)
[Blog](https://react.dev/blog)
[](https://react.dev/community/translations)
[](https://github.com/facebook/react/releases)
### react@19.1
  * [Overview ](https://react.dev/reference/react "Overview")
  * [Hooks ](https://react.dev/reference/react/hooks "Hooks")
    * [useActionState ](https://react.dev/reference/react/useActionState "useActionState")
    * [useCallback ](https://react.dev/reference/react/useCallback "useCallback")
    * [useContext ](https://react.dev/reference/react/useContext "useContext")
    * [useDebugValue ](https://react.dev/reference/react/useDebugValue "useDebugValue")
    * [useDeferredValue ](https://react.dev/reference/react/useDeferredValue "useDeferredValue")
    * [useEffect ](https://react.dev/reference/react/useEffect "useEffect")
    * [useId ](https://react.dev/reference/react/useId "useId")
    * [useImperativeHandle ](https://react.dev/reference/react/useImperativeHandle "useImperativeHandle")
    * [useInsertionEffect ](https://react.dev/reference/react/useInsertionEffect "useInsertionEffect")
    * [useLayoutEffect ](https://react.dev/reference/react/useLayoutEffect "useLayoutEffect")
    * [useMemo ](https://react.dev/reference/react/useMemo "useMemo")
    * [useOptimistic ](https://react.dev/reference/react/useOptimistic "useOptimistic")
    * [useReducer ](https://react.dev/reference/react/useReducer "useReducer")
    * [useRef ](https://react.dev/reference/react/useRef "useRef")
    * [useState ](https://react.dev/reference/react/useState "useState")
    * [useSyncExternalStore ](https://react.dev/reference/react/useSyncExternalStore "useSyncExternalStore")
    * [useTransition ](https://react.dev/reference/react/useTransition "useTransition")
  * [Components ](https://react.dev/reference/react/components "Components")
    * [<Fragment> (<>) ](https://react.dev/reference/react/Fragment "<Fragment> \(<>\)")
    * [<Profiler> ](https://react.dev/reference/react/Profiler "<Profiler>")
    * [<StrictMode> ](https://react.dev/reference/react/StrictMode "<StrictMode>")
    * [<Suspense> ](https://react.dev/reference/react/Suspense "<Suspense>")
    * [<Activity> - This feature is available in the latest Experimental version of React](https://react.dev/reference/react/Activity "<Activity>")
    * [<ViewTransition> - This feature is available in the latest Experimental version of React](https://react.dev/reference/react/ViewTransition "<ViewTransition>")
  * [APIs ](https://react.dev/reference/react/apis "APIs")
    * [act ](https://react.dev/reference/react/act "act")
    * [cache ](https://react.dev/reference/react/cache "cache")
    * [captureOwnerStack ](https://react.dev/reference/react/captureOwnerStack "captureOwnerStack")
    * [createContext ](https://react.dev/reference/react/createContext "createContext")
    * [lazy ](https://react.dev/reference/react/lazy "lazy")
    * [memo ](https://react.dev/reference/react/memo "memo")
    * [startTransition ](https://react.dev/reference/react/startTransition "startTransition")
    * [use ](https://react.dev/reference/react/use "use")
    * [experimental_taintObjectReference  - This feature is available in the latest Experimental version of React](https://react.dev/reference/react/experimental_taintObjectReference "experimental_taintObjectReference")
    * [experimental_taintUniqueValue  - This feature is available in the latest Experimental version of React](https://react.dev/reference/react/experimental_taintUniqueValue "experimental_taintUniqueValue")
    * [unstable_addTransitionType  - This feature is available in the latest Experimental version of React](https://react.dev/reference/react/addTransitionType "unstable_addTransitionType")
### react-dom@19.1
  * [Hooks ](https://react.dev/reference/react-dom/hooks "Hooks")
    * [useFormStatus ](https://react.dev/reference/react-dom/hooks/useFormStatus "useFormStatus")
  * [Components ](https://react.dev/reference/react-dom/components "Components")
    * [Common (e.g. <div>) ](https://react.dev/reference/react-dom/components/common "Common \(e.g. <div>\)")
    * [<form> ](https://react.dev/reference/react-dom/components/form "<form>")
    * [<input> ](https://react.dev/reference/react-dom/components/input "<input>")
    * [<option> ](https://react.dev/reference/react-dom/components/option "<option>")
    * [<progress> ](https://react.dev/reference/react-dom/components/progress "<progress>")
    * [<select> ](https://react.dev/reference/react-dom/components/select "<select>")
    * [<textarea> ](https://react.dev/reference/react-dom/components/textarea "<textarea>")
    * [<link> ](https://react.dev/reference/react-dom/components/link "<link>")
    * [<meta> ](https://react.dev/reference/react-dom/components/meta "<meta>")
    * [<script> ](https://react.dev/reference/react-dom/components/script "<script>")
    * [<style> ](https://react.dev/reference/react-dom/components/style "<style>")
    * [<title> ](https://react.dev/reference/react-dom/components/title "<title>")
  * [APIs ](https://react.dev/reference/react-dom "APIs")
    * [createPortal ](https://react.dev/reference/react-dom/createPortal "createPortal")
    * [flushSync ](https://react.dev/reference/react-dom/flushSync "flushSync")
    * [preconnect ](https://react.dev/reference/react-dom/preconnect "preconnect")
    * [prefetchDNS ](https://react.dev/reference/react-dom/prefetchDNS "prefetchDNS")
    * [preinit ](https://react.dev/reference/react-dom/preinit "preinit")
    * [preinitModule ](https://react.dev/reference/react-dom/preinitModule "preinitModule")
    * [preload ](https://react.dev/reference/react-dom/preload "preload")
    * [preloadModule ](https://react.dev/reference/react-dom/preloadModule "preloadModule")
  * [Client APIs ](https://react.dev/reference/react-dom/client "Client APIs")
    * [createRoot ](https://react.dev/reference/react-dom/client/createRoot "createRoot")
    * [hydrateRoot ](https://react.dev/reference/react-dom/client/hydrateRoot "hydrateRoot")
  * [Server APIs ](https://react.dev/reference/react-dom/server "Server APIs")
    * [renderToPipeableStream ](https://react.dev/reference/react-dom/server/renderToPipeableStream "renderToPipeableStream")
    * [renderToReadableStream ](https://react.dev/reference/react-dom/server/renderToReadableStream "renderToReadableStream")
    * [renderToStaticMarkup ](https://react.dev/reference/react-dom/server/renderToStaticMarkup "renderToStaticMarkup")
    * [renderToString ](https://react.dev/reference/react-dom/server/renderToString "renderToString")
  * [Static APIs ](https://react.dev/reference/react-dom/static "Static APIs")
    * [prerender ](https://react.dev/reference/react-dom/static/prerender "prerender")
    * [prerenderToNodeStream ](https://react.dev/reference/react-dom/static/prerenderToNodeStream "prerenderToNodeStream")
### Rules of React
  * [Overview ](https://react.dev/reference/rules "Overview")
    * [Components and Hooks must be pure ](https://react.dev/reference/rules/components-and-hooks-must-be-pure "Components and Hooks must be pure")
    * [React calls Components and Hooks ](https://react.dev/reference/rules/react-calls-components-and-hooks "React calls Components and Hooks")
    * [Rules of Hooks ](https://react.dev/reference/rules/rules-of-hooks "Rules of Hooks")
### React Server Components
  * [Server Components ](https://react.dev/reference/rsc/server-components "Server Components")
  * [Server Functions ](https://react.dev/reference/rsc/server-functions "Server Functions")
  * [Directives ](https://react.dev/reference/rsc/directives "Directives")
    * ['use client' ](https://react.dev/reference/rsc/use-client "'use client'")
    * ['use server' ](https://react.dev/reference/rsc/use-server "'use server'")
### Legacy APIs
  * [Legacy React APIs ](https://react.dev/reference/react/legacy "Legacy React APIs")
    * [Children ](https://react.dev/reference/react/Children "Children")
    * [cloneElement ](https://react.dev/reference/react/cloneElement "cloneElement")
    * [Component ](https://react.dev/reference/react/Component "Component")
    * [createElement ](https://react.dev/reference/react/createElement "createElement")
    * [createRef ](https://react.dev/reference/react/createRef "createRef")
    * [forwardRef ](https://react.dev/reference/react/forwardRef "forwardRef")
    * [isValidElement ](https://react.dev/reference/react/isValidElement "isValidElement")
    * [PureComponent ](https://react.dev/reference/react/PureComponent "PureComponent")


Is this page useful?
[API Reference](https://react.dev/reference/react)
[APIs](https://react.dev/reference/react/apis)
# captureOwnerStack[](https://react.dev/reference/react/captureOwnerStack#undefined "Link for this heading")
`captureOwnerStack` reads the current Owner Stack in development and returns it as a string if available.
```

const stack = captureOwnerStack();

```

  * [Reference ](https://react.dev/reference/react/captureOwnerStack#reference)
    * [`captureOwnerStack()` ](https://react.dev/reference/react/captureOwnerStack#captureownerstack)
  * [Usage ](https://react.dev/reference/react/captureOwnerStack#usage)
    * [Enhance a custom error overlay ](https://react.dev/reference/react/captureOwnerStack#enhance-a-custom-error-overlay)
  * [Troubleshooting ](https://react.dev/reference/react/captureOwnerStack#troubleshooting)
    * [The Owner Stack is `null` ](https://react.dev/reference/react/captureOwnerStack#the-owner-stack-is-null)
    * [`captureOwnerStack` is not available ](https://react.dev/reference/react/captureOwnerStack#captureownerstack-is-not-available)


## Reference [](https://react.dev/reference/react/captureOwnerStack#reference "Link for Reference ")
### `captureOwnerStack()` [](https://react.dev/reference/react/captureOwnerStack#captureownerstack "Link for this heading")
Call `captureOwnerStack` to get the current Owner Stack.
```

import * as React from 'react';
function Component() {
 if (process.env.NODE_ENV !== 'production') {
  const ownerStack = React.captureOwnerStack();
  console.log(ownerStack);
 }
}

```

#### Parameters [](https://react.dev/reference/react/captureOwnerStack#parameters "Link for Parameters ")
`captureOwnerStack` does not take any parameters.
#### Returns [](https://react.dev/reference/react/captureOwnerStack#returns "Link for Returns ")
`captureOwnerStack` returns `string | null`.
Owner Stacks are available in
  * Component render
  * Effects (e.g. `useEffect`)
  * React’s event handlers (e.g. `<button onClick={...} />`)
  * React error handlers ([React Root options](https://react.dev/reference/react-dom/client/createRoot#parameters) `onCaughtError`, `onRecoverableError`, and `onUncaughtError`)


If no Owner Stack is available, `null` is returned (see [Troubleshooting: The Owner Stack is `null`](https://react.dev/reference/react/captureOwnerStack#the-owner-stack-is-null)).
#### Caveats [](https://react.dev/reference/react/captureOwnerStack#caveats "Link for Caveats ")
  * Owner Stacks are only available in development. `captureOwnerStack` will always return `null` outside of development.


##### Deep Dive
#### Owner Stack vs Component Stack [](https://react.dev/reference/react/captureOwnerStack#owner-stack-vs-component-stack "Link for Owner Stack vs Component Stack ")
Show Details
The Owner Stack is different from the Component Stack available in React error handlers like [`errorInfo.componentStack` in `onUncaughtError`](https://react.dev/reference/react-dom/client/hydrateRoot#show-a-dialog-for-uncaught-errors).
For example, consider the following code:
index.jsApp.js
index.js
ResetFork
```
import {captureOwnerStack} from 'react';
import {createRoot} from 'react-dom/client';
import App, {Component} from './App.js';
import './styles.css';
createRoot(document.createElement('div'), {
 onUncaughtError: (error, errorInfo) => {
  // The stacks are logged instead of showing them in the UI directly to
  // highlight that browsers will apply sourcemaps to the logged stacks.
  // Note that sourcemapping is only applied in the real browser console not
  // in the fake one displayed on this page.
  // Press "fork" to be able to view the sourcemapped stack in a real console.
  console.log(errorInfo.componentStack);
  console.log(captureOwnerStack());
 },
}).render(
 <App>
  <Component label="disabled" />
 </App>
);

```

Show more
`SubComponent` would throw an error. The Component Stack of that error would be
```

at SubComponent
at fieldset
at Component
at main
at React.Suspense
at App

```

However, the Owner Stack would only read
```

at Component

```

Neither `App` nor the DOM components (e.g. `fieldset`) are considered Owners in this Stack since they didn’t contribute to “creating” the node containing `SubComponent`. `App` and DOM components only forwarded the node. `App` just rendered the `children` node as opposed to `Component` which created a node containing `SubComponent` via `<SubComponent />`.
Neither `Navigation` nor `legend` are in the stack at all since it’s only a sibling to a node containing `<SubComponent />`.
`SubComponent` is omitted because it’s already part of the callstack.
## Usage [](https://react.dev/reference/react/captureOwnerStack#usage "Link for Usage ")
### Enhance a custom error overlay [](https://react.dev/reference/react/captureOwnerStack#enhance-a-custom-error-overlay "Link for Enhance a custom error overlay ")
```

import { captureOwnerStack } from "react";
import { instrumentedConsoleError } from "./errorOverlay";
const originalConsoleError = console.error;
console.error = function patchedConsoleError(...args) {
 originalConsoleError.apply(console, args);
 const ownerStack = captureOwnerStack();
 onConsoleError({
  // Keep in mind that in a real application, console.error can be
  // called with multiple arguments which you should account for.
  consoleMessage: args[0],
  ownerStack,
 });
};

```

If you intercept `console.error` calls to highlight them in an error overlay, you can call `captureOwnerStack` to include the Owner Stack.
index.jserrorOverlay.jsApp.js
index.js
ResetFork
```
import { captureOwnerStack } from "react";
import { createRoot } from "react-dom/client";
import App from './App';
import { onConsoleError } from "./errorOverlay";
import './styles.css';
const originalConsoleError = console.error;
console.error = function patchedConsoleError(...args) {
 originalConsoleError.apply(console, args);
 const ownerStack = captureOwnerStack();
 onConsoleError({
  // Keep in mind that in a real application, console.error can be
  // called with multiple arguments which you should account for.
  consoleMessage: args[0],
  ownerStack,
 });
};
const container = document.getElementById("root");
createRoot(container).render(<App />);

```

Show more
## Troubleshooting [](https://react.dev/reference/react/captureOwnerStack#troubleshooting "Link for Troubleshooting ")
### The Owner Stack is `null` [](https://react.dev/reference/react/captureOwnerStack#the-owner-stack-is-null "Link for this heading")
The call of `captureOwnerStack` happened outside of a React controlled function e.g. in a `setTimeout` callback, after a `fetch` call or in a custom DOM event handler. During render, Effects, React event handlers, and React error handlers (e.g. `hydrateRoot#options.onCaughtError`) Owner Stacks should be available.
In the example below, clicking the button will log an empty Owner Stack because `captureOwnerStack` was called during a custom DOM event handler. The Owner Stack must be captured earlier e.g. by moving the call of `captureOwnerStack` into the Effect body.
App.js
App.js
Download ResetFork
```
import {captureOwnerStack, useEffect} from 'react';
export default function App() {
 useEffect(() => {
  // Should call `captureOwnerStack` here.
  function handleEvent() {
   // Calling it in a custom DOM event handler is too late.
   // The Owner Stack will be `null` at this point.
   console.log('Owner Stack: ', captureOwnerStack());
  }
  document.addEventListener('click', handleEvent);
  return () => {
   document.removeEventListener('click', handleEvent);
  }
 })
 return <button>Click me to see that Owner Stacks are not available in custom DOM event handlers</button>;
}

```

Show more
### `captureOwnerStack` is not available [](https://react.dev/reference/react/captureOwnerStack#captureownerstack-is-not-available "Link for this heading")
`captureOwnerStack` is only exported in development builds. It will be `undefined` in production builds. If `captureOwnerStack` is used in files that are bundled for production and development, you should conditionally access it from a namespace import.
```

// Don't use named imports of `captureOwnerStack` in files that are bundled for development and production.
import {captureOwnerStack} from 'react';
// Use a namespace import instead and access `captureOwnerStack` conditionally.
import * as React from 'react';
if (process.env.NODE_ENV !== 'production') {
 const ownerStack = React.captureOwnerStack();
 console.log('Owner Stack', ownerStack);
}

```

[Previouscache](https://react.dev/reference/react/cache)[NextcreateContext](https://react.dev/reference/react/createContext)
[](https://opensource.fb.com/)
Copyright © Meta Platforms, Inc
no uwu plz
uwu?
Logo by[@sawaratsuki1004](https://twitter.com/sawaratsuki1004)
[Learn React](https://react.dev/learn)
[Quick Start](https://react.dev/learn)
[Installation](https://react.dev/learn/installation)
[Describing the UI](https://react.dev/learn/describing-the-ui)
[Adding Interactivity](https://react.dev/learn/adding-interactivity)
[Managing State](https://react.dev/learn/managing-state)
[Escape Hatches](https://react.dev/learn/escape-hatches)
[API Reference](https://react.dev/reference/react)
[React APIs](https://react.dev/reference/react)
[React DOM APIs](https://react.dev/reference/react-dom)
[Community](https://react.dev/community)
[Code of Conduct](https://github.com/facebook/react/blob/main/CODE_OF_CONDUCT.md)
[Meet the Team](https://react.dev/community/team)
[Docs Contributors](https://react.dev/community/docs-contributors)
[Acknowledgements](https://react.dev/community/acknowledgements)
More
[Blog](https://react.dev/blog)
[React Native](https://reactnative.dev/)
[Privacy](https://opensource.facebook.com/legal/privacy)
[Terms](https://opensource.fb.com/legal/terms/)
[](https://www.facebook.com/react)[](https://twitter.com/reactjs)[](https://bsky.app/profile/react.dev)[](https://github.com/facebook/react)
## On this page
  * [Overview](https://react.dev/reference/react/captureOwnerStack)
  * [Reference ](https://react.dev/reference/react/captureOwnerStack#reference)
  * [`captureOwnerStack()` ](https://react.dev/reference/react/captureOwnerStack#captureownerstack)
  * [Usage ](https://react.dev/reference/react/captureOwnerStack#usage)
  * [Enhance a custom error overlay ](https://react.dev/reference/react/captureOwnerStack#enhance-a-custom-error-overlay)
  * [Troubleshooting ](https://react.dev/reference/react/captureOwnerStack#troubleshooting)
  * [The Owner Stack is `null` ](https://react.dev/reference/react/captureOwnerStack#the-owner-stack-is-null)
  * [`captureOwnerStack` is not available ](https://react.dev/reference/react/captureOwnerStack#captureownerstack-is-not-available)



