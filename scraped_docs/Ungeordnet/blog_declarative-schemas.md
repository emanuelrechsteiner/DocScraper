---
url: https://supabase.com/blog/declarative-schemas
scraped_at: 2025-05-25T08:39:32.401552
title: Declarative Schemas for Simpler Database Management
---

  1. We use cookies to collect data and improve our services. [Learn more](https://supabase.com/privacy#8-cookies-and-similar-technologies-used-on-our-european-services)
[Learn more](https://supabase.com/privacy#8-cookies-and-similar-technologies-used-on-our-european-services)•Privacy settings
Accept Opt out Privacy settings


[![Supabase Logo](https://supabase.com/_next/image?url=https%3A%2F%2Ffrontend-assets.supabase.com%2Fwww%2Fd218d9190b87%2F_next%2Fstatic%2Fmedia%2Fsupabase-logo-wordmark--light.daaeffd3.png&w=256&q=75&dpl=dpl_9xPTPeSUKoDuygMmT5sPj6DB4mgG)![Supabase Logo](https://supabase.com/_next/image?url=https%3A%2F%2Ffrontend-assets.supabase.com%2Fwww%2Fd218d9190b87%2F_next%2Fstatic%2Fmedia%2Fsupabase-logo-wordmark--dark.b36ebb5f.png&w=256&q=75&dpl=dpl_9xPTPeSUKoDuygMmT5sPj6DB4mgG)](https://supabase.com/)
  * Product 
  * Developers 
  * [Enterprise](https://supabase.com/enterprise)
  * [Pricing](https://supabase.com/pricing)
  * [Docs](https://supabase.com/docs)
  * [Blog](https://supabase.com/blog)


[83.3K](https://github.com/supabase/supabase)[Sign in](https://supabase.com/dashboard)[Start your project](https://supabase.com/dashboard)
Open main menu
[Back](https://supabase.com/blog)
[Blog](https://supabase.com/blog)
# Declarative Schemas for Simpler Database Management
03 Apr 2025
•
7 minute read
[![Qiao Han avatar](https://supabase.com/_next/image?url=https%3A%2F%2Fgithub.com%2Fsweatybridge.png&w=96&q=75&dpl=dpl_9xPTPeSUKoDuygMmT5sPj6DB4mgG)Qiao HanEngineering](https://github.com/sweatybridge)
![Declarative Schemas for Simpler Database Management](https://supabase.com/_next/image?url=%2Fimages%2Fblog%2Flaunch-week-14%2Fday-4-declarative-schemas%2Fthumb.png&w=3840&q=100&dpl=dpl_9xPTPeSUKoDuygMmT5sPj6DB4mgG)
Today we’re releasing declarative schemas to simplify managing and maintaining complex database schemas. With declarative schemas, you can define your database structure in a clear, centralized, and version-controlled manner.
## What are declarative schemas?[#](https://supabase.com/blog/declarative-schemas#what-are-declarative-schemas)
Declarative schemas store the final desired state of the database in `.sql` files that can be saved and versioned alongside a project. For example, here is the declarative schema for a classic `products` table:
`
1
create table "products" (
2
 id     bigint generated by default as identity,
3
 name    text not null,
4
 category  text,
5
 price   numeric(10, 2) not null,
6
 created_at timestamptz default now()
7
);
89
alter table "products"
10
enable row level security;
`
Declarative schemas offer numerous benefits over making changes to your database schema directly:
  * **Single pane of glass**. Maintain your entire database schema in one place, reducing redundancy and potential errors.
  * **Versioned migrations**. Automatically generate migration files, ensuring consistent schema updated across environments. Store your declarative schema files alongside your project files in your version control system.
  * **Concise code reviews**. Easily review changes to tables, views, and functions without manually repeating complex migration scripts.


## Declarative schemas vs migrations[#](https://supabase.com/blog/declarative-schemas#declarative-schemas-vs-migrations)
It's best practice to use [Migrations](https://supabase.com/docs/guides/deployment/database-migrations) to track and apply changes to databases. Every time you make a change, you create a new file with all the changes, keeping changes versioned and reproducible.
However, as the complexity of a database schemas grows, it becomes increasingly difficult to develop using versioned migrations as there isn't a single place to see the entire database schema.
For example, at Supabase we have a complex and frequently-updated `projects` table. Here's partially what it looks like with RLS enabled:
`
1
create table private.projects (
2
 id       bigint  not null,
3
 name      text   not null,
4
 organization_id bigint  not null,
5
 inserted_at   timestamp not null,
6
 updated_at   timestamp not null
7
);
89
alter table private.projects
10
enable row level security;
1112
create policy projects_insert
13
 on private.projects
14
 for insert
15
 to authenticated
16
with check auth.can_write(project_id);
1718
create policy projects_select
19
 on private.projects
20
 for select
21
 to authenticated
22
using auth.can_read(project_id);
2324
-- Users can only view the projects that they have access to
25
create view public.projects as select
26
 projects.id,
27
 projects.name,
28
 projects.organization_id,
29
 projects.inserted_at,
30
 projects.updated_at
31
from private.projects
32
where auth.can_read(projects.id);
`
The `projects` table is created in a private schema, with a public view exposed for reads. Attribute-based access control (ABAC) is implemented on top of RLS policies to ensure queries only return projects that the user has access to.
Since Postgres views are not updatable by default, we have defined trigger functions to cascade writes to the underlying table when a Supabase user creates a new project. This makes development easier because the `projects` view can be inserted with regular PostgREST calls while invoking the appropriate RLS policies on the underlying table.
`
1
-- Triggers to update views from PostgREST: select('projects').insert({ ... })
2
create function public.public_projects_on_insert() returns trigger
3
as $$
4
begin
5
 insert into private.projects(
6
  name,
7
  organization_id,
8
  inserted_at,
9
  updated_at
10
 ) values (
11
  NEW.name,
12
  NEW.organization_id,
13
  coalesce(NEW.inserted_at, now()),
14
  coalesce(NEW.updated_at, now())
15
 ) returning * into NEW;
16
 return NEW;
17
end
18
$$ language plpgsql;
1920
create trigger public_projects_on_insert
21
 instead of insert
22
 on public.projects
23
 for each row
24
execute function public.public_projects_on_insert();
`
This complexity slows down development velocity, as changes to the table might break other views or functions. Back in early 2022, a simple change to add a new column involved the following steps.
  1. Find the latest schema for `projects` table in our migration files or by querying our database.
  2. Write the `alter table` statement in a new migration file.
  3. Copy and update the `projects` view definition to include the new column.
  4. Copy and update the trigger function definition to include the new column.
  5. Add new pgTAP tests and verify that existing tests pass.
  6. Submit the new migration file for review, which would be at least a few hundred lines.


This process is tedious and it's frustrating to have multiple engineers working on the `projects` table concurrently. Merging PRs would result in a merge conflict that must be resolved by repeating steps 1-5.
## Using declarative schemas in production[#](https://supabase.com/blog/declarative-schemas#using-declarative-schemas-in-production)
Adopting declarative schemas gave our engineers a single pane of glass when updating database schemas. Instead of manually duplicating affected postgres entities in a migration file, we only need to change the schema definition in one place.
We then use a schema diff tool, like [migra](https://github.com/djrobstep/migra), to figure out the necessary updates to views and functions when generating the migration file.
For example, adding a new `metadata` column to the `projects` table now becomes a single line diff.
`
1
--- a/supabase/schemas/projects.sql
2
+++ b/supabase/schemas/projects.sql
3
@@ -2,6 +2,7 @@ create table private.projects (
4
  id       bigint  not null,
5
  name      text   not null,
6
  organization_id bigint  not null,
7
+ metadata    jsonb,
8
  inserted_at   timestamp not null,
9
  updated_at   timestamp not null
10
 );
`
The same process also applies to views, database functions, RLS policies, role grants, custom types, and constraints. While manual reviews are still required on the generated migration file, it has cut down our development from hours to minutes. It's also much easier to rebase on merge conflicts introduced by other PRs.
## Get started with declarative schemas[#](https://supabase.com/blog/declarative-schemas#get-started-with-declarative-schemas)
Declarative schemas are available today on Supabase.
  * [Read the documentation](https://supabase.com/docs/guides/local-development/declarative-database-schemas) to learn how to manage your database schemas in one place and generate versioned migrations.
  * [Sign up for Supabase](https://supabase.com/dashboard/sign-up) and get started today.


We added the same set of tools that we used internally for the last 2 years to [Supabase CLI](https://supabase.com/docs/guides/local-development/cli/getting-started). Whether you are just getting started with migrations or already fed up with managing hundreds of migration files, give declarative schemas a try as it will likely simplify your development process.
Check out our blog post on [Postgres Language Server](https://supabase.com/blog/postgres-language-server) for better tooling and IDE integration when developing with declarative schemas.
[Launch Week 14](https://supabase.com/launch-week)
Mar 31 - Apr 04 '25
[Day 1 -Supabase UI Library](https://supabase.com/blog/supabase-ui-library)[Day 2 -Supabase Edge Functions: Deploy from the Dashboard + Deno 2.1](https://supabase.com/blog/supabase-edge-functions-deploy-dashboard-deno-2-1)[Day 3 -Realtime: Broadcast from Database](https://supabase.com/blog/realtime-broadcast-from-database)[Day 4 -Declarative Schemas for Simpler Database Management](https://supabase.com/blog/declarative-schemas)[Day 5 -Supabase MCP Server](https://supabase.com/blog/mcp-server)

Build Stage
[01 -Postgres Language Server](https://supabase.com/blog/postgres-language-server)[02 -Supabase Auth: Bring Your Own Clerk](https://supabase.com/blog/clerk-tpa-pricing)[03 -Automatic Embeddings in Postgres](https://supabase.com/blog/automatic-embeddings)[04 -Keeping Tabs: What's New in Supabase Studio](https://supabase.com/blog/tabs-dashboard-updates)[05 -Dedicated Poolers](https://supabase.com/blog/dedicated-poolers)[06 -Data API Routes to Nearest Read Replica](https://supabase.com/blog/data-api-nearest-read-replica)[Community Meetups](https://supabase.com/events?category=meetup)

Share this article
[](https://twitter.com/intent/tweet?url=https%3A%2F%2Fsupabase.com%2Fblog%2Fdeclarative-schemas&text=Declarative%20Schemas%20for%20Simpler%20Database%20Management)[](https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fsupabase.com%2Fblog%2Fdeclarative-schemas&text=Declarative%20Schemas%20for%20Simpler%20Database%20Management)[](https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fsupabase.com%2Fblog%2Fdeclarative-schemas&t=Declarative%20Schemas%20for%20Simpler%20Database%20Management)
[Last postData API Routes to Nearest Read Replica4 April 2025](https://supabase.com/blog/data-api-nearest-read-replica)
[Next postRealtime: Broadcast from Database2 April 2025](https://supabase.com/blog/realtime-broadcast-from-database)
[launch-week](https://supabase.com/blog/tags/launch-week)
On this page
  * [What are declarative schemas?](https://supabase.com/blog/declarative-schemas#what-are-declarative-schemas)
  * [Declarative schemas vs migrations](https://supabase.com/blog/declarative-schemas#declarative-schemas-vs-migrations)
  * [Using declarative schemas in production](https://supabase.com/blog/declarative-schemas#using-declarative-schemas-in-production)
  * [Get started with declarative schemas](https://supabase.com/blog/declarative-schemas#get-started-with-declarative-schemas)


Share this article
[](https://twitter.com/intent/tweet?url=https%3A%2F%2Fsupabase.com%2Fblog%2Fdeclarative-schemas&text=Declarative%20Schemas%20for%20Simpler%20Database%20Management)[](https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fsupabase.com%2Fblog%2Fdeclarative-schemas&text=Declarative%20Schemas%20for%20Simpler%20Database%20Management)[](https://news.ycombinator.com/submitlink?u=https%3A%2F%2Fsupabase.com%2Fblog%2Fdeclarative-schemas&t=Declarative%20Schemas%20for%20Simpler%20Database%20Management)
## Build in a weekend, scale to millions
[Start your project](https://supabase.com/dashboard)[Request a demo](https://supabase.com/contact/sales)
## Footer
We protect your data.[More on Security](https://supabase.com/security)
  * SOC2 Type 2 Certified
  * HIPAA Compliant


[![Supabase Logo](https://supabase.com/_next/image?url=https%3A%2F%2Ffrontend-assets.supabase.com%2Fwww%2Fd218d9190b87%2F_next%2Fstatic%2Fmedia%2Fsupabase-logo-wordmark--light.daaeffd3.png&w=384&q=75&dpl=dpl_9xPTPeSUKoDuygMmT5sPj6DB4mgG)![Supabase Logo](https://supabase.com/_next/image?url=https%3A%2F%2Ffrontend-assets.supabase.com%2Fwww%2Fd218d9190b87%2F_next%2Fstatic%2Fmedia%2Fsupabase-logo-wordmark--dark.b36ebb5f.png&w=384&q=75&dpl=dpl_9xPTPeSUKoDuygMmT5sPj6DB4mgG)](https://supabase.com/)
[Twitter](https://twitter.com/supabase)[GitHub](https://github.com/supabase)[Discord](https://discord.supabase.com/)[Youtube](https://youtube.com/c/supabase)
###### Product
  * [Database](https://supabase.com/database)
  * [Auth](https://supabase.com/auth)
  * [Functions](https://supabase.com/edge-functions)
  * [Realtime](https://supabase.com/realtime)
  * [Storage](https://supabase.com/storage)
  * [Vector](https://supabase.com/modules/vector)
  * [Cron](https://supabase.com/modules/cron)
  * [Pricing](https://supabase.com/pricing)
  * [Launch Week](https://supabase.com/launch-week)
  * [AI Builders](https://supabase.com/solutions/ai-builders)


###### Resources
  * [Support](https://supabase.com/support)
  * [System Status](https://status.supabase.com/)
  * [Become a Partner](https://supabase.com/partners)
  * [Integrations](https://supabase.com/partners/integrations)
  * [Brand Assets / Logos](https://supabase.com/brand-assets)
  * [Security and Compliance](https://supabase.com/security)
  * [DPA](https://supabase.com/legal/dpa)
  * [SOC2](https://supabase.com/security)
  * [HIPAA](https://forms.supabase.com/hipaa2)


###### Developers
  * [Documentation](https://supabase.com/docs)
  * [Supabase UI](https://supabase.com/ui)
  * [Changelog](https://supabase.com/changelog)
  * [Contributing](https://github.com/supabase/supabase/blob/master/CONTRIBUTING.md)
  * [Open Source](https://supabase.com/open-source)
  * [SupaSquad](https://supabase.com/supasquad)
  * [DevTo](https://dev.to/supabase)
  * [RSS](https://supabase.com/rss.xml)


###### Company
  * [Blog](https://supabase.com/blog)
  * [Customer Stories](https://supabase.com/customers)
  * [Careers](https://supabase.com/careers)
  * [Company](https://supabase.com/company)
  * [Events & Webinars](https://supabase.com/events)
  * [General Availability](https://supabase.com/ga)
  * [Terms of Service](https://supabase.com/terms)
  * [Privacy Policy](https://supabase.com/privacy)
  * Privacy Settings
  * [Acceptable Use Policy](https://supabase.com/aup)
  * [Support Policy](https://supabase.com/support-policy)
  * [Service Level Agreement](https://supabase.com/sla)
  * [Humans.txt](https://supabase.com/humans.txt)
  * [Lawyers.txt](https://supabase.com/lawyers.txt)
  * [Security.txt](https://supabase.com/.well-known/security.txt)


© Supabase Inc
Toggle theme

