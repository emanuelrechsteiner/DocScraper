---
url: https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse
scraped_at: 2025-05-25T09:42:13.010976
title: ClickHouse | Supabase Docs
---

[![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-dark.svg&w=256&q=75)![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-light.svg&w=256&q=75)DOCS](https://supabase.com/docs)
  * [Start](https://supabase.com/docs/guides/getting-started)
  * Products 
  * Build 
  * Manage 
  * Reference 
  * Resources 


[![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-dark.svg&w=256&q=75)![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-light.svg&w=256&q=75)DOCS](https://supabase.com/docs)
Search docs...
K
[Sign up](https://supabase.com/dashboard)
Main menu
[Database](https://supabase.com/docs/guides/database/overview)
  * [Overview](https://supabase.com/docs/guides/database/overview)
Fundamentals
  * [Connecting to your database](https://supabase.com/docs/guides/database/connecting-to-postgres)
  * [Importing data](https://supabase.com/docs/guides/database/import-data)
  * [Securing your data](https://supabase.com/docs/guides/database/secure-data)
Working with your database (basics)
  * [Managing tables, views, and data](https://supabase.com/docs/guides/database/tables)
  * [Working with arrays](https://supabase.com/docs/guides/database/arrays)
  * [Managing indexes](https://supabase.com/docs/guides/database/postgres/indexes)
  * [Querying joins and nested tables](https://supabase.com/docs/guides/database/joins-and-nesting)
  * [JSON and unstructured data](https://supabase.com/docs/guides/database/json)
Working with your database (intermediate)
  * [Implementing cascade deletes](https://supabase.com/docs/guides/database/postgres/cascade-deletes)
  * [Managing enums](https://supabase.com/docs/guides/database/postgres/enums)
  * [Managing database functions](https://supabase.com/docs/guides/database/functions)
  * [Managing database triggers](https://supabase.com/docs/guides/database/postgres/triggers)
  * [Managing database webhooks](https://supabase.com/docs/guides/database/webhooks)
  * [Using Full Text Search](https://supabase.com/docs/guides/database/full-text-search)
  * [Partitioning your tables](https://supabase.com/docs/guides/database/partitions)
  * [Managing connections](https://supabase.com/docs/guides/database/connection-management)
OrioleDB
  * [Overview](https://supabase.com/docs/guides/database/orioledb)
Access and security
  * [Row Level Security](https://supabase.com/docs/guides/database/postgres/row-level-security)
  * [Column Level Security](https://supabase.com/docs/guides/database/postgres/column-level-security)
  * [Hardening the Data API](https://supabase.com/docs/guides/database/hardening-data-api)
  * [Custom Claims & RBAC](https://supabase.com/docs/guides/database/postgres/custom-claims-and-role-based-access-control-rbac)
  * [Managing Postgres Roles](https://supabase.com/docs/guides/database/postgres/roles)
  * [Using Custom Postgres Roles](https://supabase.com/docs/guides/storage/schema/custom-roles)
  * [Managing secrets with Vault](https://supabase.com/docs/guides/database/vault)
  * [Superuser Access and Unsupported Operations](https://supabase.com/docs/guides/database/postgres/roles-superuser)
Configuration, optimization, and testing
  * [Database configuration](https://supabase.com/docs/guides/database/postgres/configuration)
  * [Managing database replication](https://supabase.com/docs/guides/database/replication)
  * [Query optimization](https://supabase.com/docs/guides/database/query-optimization)
  * [Database Advisors](https://supabase.com/docs/guides/database/database-advisors)
  * [Testing your database](https://supabase.com/docs/guides/database/testing)
  * [Customizing Postgres config](https://supabase.com/docs/guides/database/custom-postgres-config)
Debugging
  * [Timeouts](https://supabase.com/docs/guides/database/postgres/timeouts)
  * [Debugging and monitoring](https://supabase.com/docs/guides/database/inspect)
  * [Debugging performance issues](https://supabase.com/docs/guides/database/debugging-performance)
  * [Supavisor](https://supabase.com/docs/guides/database/supavisor)
ORM Quickstarts
  * [Prisma](https://supabase.com/docs/guides/database/prisma)
  * [Drizzle](https://supabase.com/docs/guides/database/drizzle)
  * [Postgres.js](https://supabase.com/docs/guides/database/postgres-js)
GUI quickstarts
  * [pgAdmin](https://supabase.com/docs/guides/database/pgadmin)
  * [PSQL](https://supabase.com/docs/guides/database/psql)
  * [DBeaver](https://supabase.com/docs/guides/database/dbeaver)
  * [Metabase](https://supabase.com/docs/guides/database/metabase)
  * [Beekeeper Studio](https://supabase.com/docs/guides/database/beekeeper-studio)
Extensions
  * [Overview](https://supabase.com/docs/guides/database/extensions)
  * [HypoPG: Hypothetical indexes](https://supabase.com/docs/guides/database/extensions/hypopg)
  * [plv8: Javascript Language](https://supabase.com/docs/guides/database/extensions/plv8)
  * [http: RESTful Client](https://supabase.com/docs/guides/database/extensions/http)
  * [index_advisor: Query optimization](https://supabase.com/docs/guides/database/extensions/index_advisor)
  * [PGAudit: Postgres Auditing](https://supabase.com/docs/guides/database/extensions/pgaudit)
  * [pgjwt: JSON Web Tokens](https://supabase.com/docs/guides/database/extensions/pgjwt)
  * [PGroonga: Multilingual Full Text Search](https://supabase.com/docs/guides/database/extensions/pgroonga)
  * [pgRouting: Geospatial Routing](https://supabase.com/docs/guides/database/extensions/pgrouting)
  * [pg_cron: Schedule Recurring Jobs](https://supabase.com/docs/guides/database/extensions/pg_cron)
  * [pg_graphql: GraphQL Support](https://supabase.com/docs/guides/database/extensions/pg_graphql)
  * [pg_hashids: Short UIDs](https://supabase.com/docs/guides/database/extensions/pg_hashids)
  * [pg_jsonschema: JSON Schema Validation](https://supabase.com/docs/guides/database/extensions/pg_jsonschema)
  * [pg_net: Async Networking](https://supabase.com/docs/guides/database/extensions/pg_net)
  * [pg_plan_filter: Restrict Total Cost](https://supabase.com/docs/guides/database/extensions/pg_plan_filter)
  * [postgres_fdw: query data from an external Postgres server](https://supabase.com/docs/guides/database/extensions/postgres_fdw)
  * [pgvector: Embeddings and vector similarity](https://supabase.com/docs/guides/database/extensions/pgvector)
  * [pg_stat_statements: SQL Planning and Execution Statistics](https://supabase.com/docs/guides/database/extensions/pg_stat_statements)
  * [pg_repack: Storage Optimization](https://supabase.com/docs/guides/database/extensions/pg_repack)
  * [PostGIS: Geo queries](https://supabase.com/docs/guides/database/extensions/postgis)
  * [pgmq: Queues](https://supabase.com/docs/guides/database/extensions/pgmq)
  * [pgsodium (pending deprecation): Encryption Features](https://supabase.com/docs/guides/database/extensions/pgsodium)
  * [pgTAP: Unit Testing](https://supabase.com/docs/guides/database/extensions/pgtap)
  * [plpgsql_check: PL/pgSQL Linter](https://supabase.com/docs/guides/database/extensions/plpgsql_check)
  * [timescaledb: Time-series data](https://supabase.com/docs/guides/database/extensions/timescaledb)
  * [uuid-ossp: Unique Identifiers](https://supabase.com/docs/guides/database/extensions/uuid-ossp)
  * [RUM: inverted index for full-text search](https://supabase.com/docs/guides/database/extensions/rum)
Foreign Data Wrappers
  * [Overview](https://supabase.com/docs/guides/database/extensions/wrappers/overview)
  * [Connecting to Auth0](https://supabase.com/docs/guides/database/extensions/wrappers/auth0)
  * [Connecting to Airtable](https://supabase.com/docs/guides/database/extensions/wrappers/airtable)
  * [Connecting to AWS Cognito](https://supabase.com/docs/guides/database/extensions/wrappers/cognito)
  * [Connecting to AWS S3](https://supabase.com/docs/guides/database/extensions/wrappers/s3)
  * [Connecting to BigQuery](https://supabase.com/docs/guides/database/extensions/wrappers/bigquery)
  * [Connecting to Clerk](https://supabase.com/docs/guides/database/extensions/wrappers/clerk)
  * [Connecting to ClickHouse](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse)
  * [Connecting to Firebase](https://supabase.com/docs/guides/database/extensions/wrappers/firebase)
  * [Connecting to Logflare](https://supabase.com/docs/guides/database/extensions/wrappers/logflare)
  * [Connecting to MSSQL](https://supabase.com/docs/guides/database/extensions/wrappers/mssql)
  * [Connecting to Notion](https://supabase.com/docs/guides/database/extensions/wrappers/notion)
  * [Connecting to Paddle](https://supabase.com/docs/guides/database/extensions/wrappers/paddle)
  * [Connecting to Redis](https://supabase.com/docs/guides/database/extensions/wrappers/redis)
  * [Connecting to Snowflake](https://supabase.com/docs/guides/database/extensions/wrappers/snowflake)
  * [Connecting to Stripe](https://supabase.com/docs/guides/database/extensions/wrappers/stripe)
Examples
  * [Drop All Tables in Schema](https://supabase.com/docs/guides/database/postgres/dropping-all-tables-in-schema)
  * [Select First Row per Group](https://supabase.com/docs/guides/database/postgres/first-row-in-group)
  * [Print PostgreSQL Version](https://supabase.com/docs/guides/database/postgres/which-version-of-postgres)
  * [Replicating from Supabase to External Postgres](https://supabase.com/docs/guides/database/postgres/setup-replication-external)


[![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-dark.svg&w=256&q=75)![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-light.svg&w=256&q=75)DOCS](https://supabase.com/docs)
  * [Start](https://supabase.com/docs/guides/getting-started)
  * Products 
  * Build 
  * Manage 
  * Reference 
  * Resources 


[![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-dark.svg&w=256&q=75)![Supabase wordmark](https://supabase.com/docs/_next/image?url=%2Fdocs%2Fsupabase-light.svg&w=256&q=75)DOCS](https://supabase.com/docs)
Search docs...
K
[Sign up](https://supabase.com/dashboard)
Database
  1. [Database](https://supabase.com/docs/guides/database/overview)
  2. Foreign Data Wrappers
  3. [Connecting to ClickHouse](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse)


ClickHouse
[ClickHouse](https://clickhouse.com/) is a fast open-source column-oriented database management system that allows generating analytical data reports in real-time using SQL queries.
The ClickHouse Wrapper allows you to read and write data from ClickHouse within your Postgres database.
## Preparation[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#preparation)
Before you can query ClickHouse, you need to enable the Wrappers extension and store your credentials in Postgres.
### Enable Wrappers[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#enable-wrappers)
Make sure the `wrappers` extension is installed on your database:
```

1
create extension ifnotexists wrappers withschema extensions;

```

### Enable the ClickHouse Wrapper[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#enable-the-clickhouse-wrapper)
Enable the `clickhouse_wrapper` FDW:
```

1
2
3
create foreign data wrapper clickhouse_wrapper handler click_house_fdw_handler validator click_house_fdw_validator;

```

### Store your credentials (optional)[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#store-your-credentials-optional)
By default, Postgres stores FDW credentials inside `pg_catalog.pg_foreign_server` in plain text. Anyone with access to this table will be able to view these credentials. Wrappers is designed to work with [Vault](https://supabase.com/docs/guides/database/vault), which provides an additional level of security for storing credentials. We recommend using Vault to store your credentials.
```

1
2
3
4
5
6
-- Save your ClickHouse credential in Vault and retrieve the created `key_id`selectvault.create_secret('tcp://default:@localhost:9000/default','clickhouse','ClickHouse credential for Wrappers');

```

### Connecting to ClickHouse[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#connecting-to-clickhouse)
We need to provide Postgres with the credentials to connect to ClickHouse, and any additional options. We can do this using the `create server` command:
With VaultWithout Vault
```

1
2
3
4
5
createserver clickhouse_server foreign data wrapper clickhouse_wrapper options (  conn_string_id '<key_ID>'-- The Key ID from above. );

```

Some connection string examples:
  * `tcp://user:password@host:9000/clicks?compression=lz4&ping_timeout=42ms`
  * `tcp://default:PASSWORD@abc.eu-west-1.aws.clickhouse.cloud:9440/default?connection_timeout=30s&ping_before_query=false&secure=true`


Check [more connection string parameters](https://github.com/suharev7/clickhouse-rs#dns).
### Create a schema[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#create-a-schema)
We recommend creating a schema to hold all the foreign tables:
```

1
createschemaifnotexists clickhouse;

```

## Options[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#options)
The following options are available when creating ClickHouse foreign tables:
  * `table` - Source table name in ClickHouse, required


This can also be a subquery enclosed in parentheses, for example,
```

1
table'(select * from my_table)'

```

### Parametrized views[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#parametrized-views)
[Parametrized view](https://clickhouse.com/docs/en/sql-reference/statements/create/view#parameterized-view) is also supported in the subquery. In this case, you need to define a column for each parameter and use `where` to pass values to them. For example,
```

1
2
3
4
5
6
7
8
9
10
11
12
13
create foreign table test_vw (  id bigint,  col1 text,  col2 bigint,  _param1 text,  _param2 bigint )server clickhouse_server  options (table'(select * from my_view(column1=${_param1}, column2=${_param2}))'  );select*from test_vw where _param1='aaa'and _param2=32;

```

  * `rowid_column` - Primary key column name, optional for data scan, required for data modify


## Entities[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#entities)
### Tables[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#tables)
The ClickHouse Wrapper supports data reads and writes from ClickHouse tables.
#### Operations[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#operations)
Object| Select| Insert| Update| Delete| Truncate  
---|---|---|---|---|---  
Tables| ✅| ✅| ✅| ✅| ❌  
#### Usage[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#usage)
```

1
2
3
4
5
6
7
8
create foreign tableclickhouse.my_table ( id bigint,nametext)server clickhouse_server options (table'people' );

```

#### Notes[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#notes)
  * Supports `where`, `order by` and `limit` clause pushdown
  * Supports parametrized views in subqueries
  * When using `rowid_column`, it must be specified for data modification operations


## Query Pushdown Support[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#query-pushdown-support)
This FDW supports `where`, `order by` and `limit` clause pushdown, as well as parametrized view (see above).
## Supported Data Types[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#supported-data-types)
Postgres Type| ClickHouse Type  
---|---  
boolean| UInt8  
smallint| Int16  
integer| UInt16  
integer| Int32  
bigint| UInt32  
bigint| Int64  
bigint| UInt64  
real| Float32  
double precision| Float64  
text| String  
date| Date  
timestamp| DateTime  
*| Nullable<T>  
## Limitations[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#limitations)
This section describes important limitations and considerations when using this FDW:
  * Full result sets must be transferred from ClickHouse to PostgreSQL
  * Large result sets consume significant PostgreSQL memory
  * Only basic query clauses (WHERE, ORDER BY, LIMIT) support pushdown
  * Limited data type mappings (see [Supported Data Types](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#supported-data-types) section)
  * Materialized views using foreign tables may fail during logical backups


## Examples[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#examples)
### Basic Query Example[#](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#basic-query-example)
This example demonstrates basic ClickHouse table operations.
```

1
2
3
4
5
6
7
8
9
10
-- Run below SQLs on ClickHouse to create source tablecreatetablepeople ( id Int64,name String)engine=MergeTree()order by id;-- Add some test datainsert into people values (1, 'Luke Skywalker'), (2, 'Leia Organa'), (3, 'Han Solo');

```

Create foreign table on Postgres database:
```

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
create foreign tableclickhouse.people ( id bigint,nametext)server clickhouse_server options (table'people' );-- data scanselect*fromclickhouse.people;-- data modifyinsert intoclickhouse.peoplevalues (4, 'Yoda');updateclickhouse.peoplesetname='Princess Leia'where id =2;deletefromclickhouse.peoplewhere id =3;

```

[Edit this page on GitHub ](https://github.com/supabase/wrappers/blob/docs_v0.4.6-1/docs/catalog/clickhouse.md)
### Is this helpful?
No Yes
### On this page
[Preparation](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#preparation)[Enable Wrappers](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#enable-wrappers)[Enable the ClickHouse Wrapper](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#enable-the-clickhouse-wrapper)[Store your credentials (optional)](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#store-your-credentials-optional)[Connecting to ClickHouse](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#connecting-to-clickhouse)[Create a schema](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#create-a-schema)[Options](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#options)[Parametrized views](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#parametrized-views)[Entities](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#entities)[Tables](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#tables)[Query Pushdown Support](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#query-pushdown-support)[Supported Data Types](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#supported-data-types)[Limitations](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#limitations)[Examples](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#examples)[Basic Query Example](https://supabase.com/docs/guides/database/extensions/wrappers/clickhouse#basic-query-example)
  * Need some help?
[Contact support](https://supabase.com/support)
  * Latest product updates?
[See Changelog](https://supabase.com/changelog)
  * Something's not right?
[Check system status](https://status.supabase.com/)


[© Supabase Inc](https://supabase.com/)—[Contributing](https://github.com/supabase/supabase/blob/master/apps/docs/DEVELOPERS.md)[Author Styleguide](https://github.com/supabase/supabase/blob/master/apps/docs/CONTRIBUTING.md)[Open Source](https://supabase.com/open-source)[SupaSquad](https://supabase.com/supasquad)Privacy Settings
[GitHub](https://github.com/supabase/supabase)[Twitter](https://twitter.com/supabase)[Discord](https://discord.supabase.com/)
  1. We use cookies to collect data and improve our services. [Learn more](https://supabase.com/privacy#8-cookies-and-similar-technologies-used-on-our-european-services)
[Learn more](https://supabase.com/privacy#8-cookies-and-similar-technologies-used-on-our-european-services)•Privacy settings
Accept Opt out Privacy settings



